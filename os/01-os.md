# 운영체재 개요

## 운영체제

### 운영체제에 대해 설명하세요.
- 정의: 하드웨어와 사용자 간의 인터페이스 역할을 하며, 시스템 자원 관리 및 응용 프로그램의 실행을 지원하는 소프트웨어
- 역할: 사용자 인터페이스 제공, 프로세스 관리, 메모리 관리, 파일 시스템 관리, 입츨력 장치 관리 등

<br>

### 커널 영역과 유저 영역에 대해 설명하세요.
- 운영체제도 결국 프로그램이므로 메모리에 적재돼야 실행할 수 있음
- 대신 운영체제는 특별한 프로그램이므로 부팅 시 메모리의 커널 영역에 따로 적재되어 실행됨
- 즉, 운영체제가 적재되는 메모리 영역을 커널 영역이라고 하며, 그 외 일반 응용 프로그램들이 적재되는 메모리 영역을 유저 영역이라고 부름

<br>

### 커널에 대해 설명하세요.
- 정의: 운영체제의 핵심 구성 요소

#### 역할
1. 프로세스 관리: 프로세스 상태 관리, 프로세스 스케줄링, 동기화 문제 해결
2. 메모리 관리: 프로세스 메모리 할당 및 해제
3. 입출력 장치 관리: 장치 드라이버를 통해 입출력 장치 관리
5. 파일 시스템 관리: 파일 및 디렉토리의 생성, 삭제, 권한 등을 관리

##### 장치 컨트롤러와 장치 드라이버
- 장치 컨트롤러: 컴퓨터 시스템의 입출력을 제어하기 위한 하드웨어, CPU와 다양한 입출력 장치 간의 통신 중개 및 데이터 버퍼링 기능 제공
- 장치 드라이버: 운영체제와 장치 컨트롤러 간의 인터페이스를 제공하는 소프트웨어, 장치 드라이버를 통해 운영체제가 입출력 장치 제어 가능

<br>

### 이중 모드(Dual Mode)에 대해 설명하세요.
- CPU가 명령어를 실행하는 모드를 유저 모드, 커널 모드 두 가지로 구분하는 방식
- 유저 모드: 일반적인 응용 프로그램이 실행되는 모드, 프로그램이 시스템 자원에 직접 접근 불가(커널 영역의 코드 실행 불가)
- 커널 모드: 운영체제 서비스를 사용할 수 있는 모드(커널 영역의 코드 실행 가능), 모든 시스템 자원에 접근 가능
- 프로그램 실행 중 인터럽트가 발생하거나 시스템 콜을 호출하면 유저 모드에서 커널 모드로 전환됨
- 커널 모드에서 운영체제 서비스에 대한 사용이 종료되면 다시 유저 모드로 전환되어 응용 프로그램이 실행됨
- 유저 모드에서 커널 모드로 전환되기 전 프로세스의 CPU 상태를 저장하고, 커널 모드에서 유저 모드로 돌아오면 프로세스의 CPU 상태를 복구함

#### 운영체제는 왜 이중 모드를 사용할까요?
- 응용 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지함으로써 시스템 자원을 보호하기 위해 사용
- 즉, 응용 프로그램은 운영체제라는 인터페이스를 통해서만 시스템 자원에 접근할 수 있음

#### 가상 머신과 하이퍼바이저 모드란 무엇일까요?
- 가상 머신: 소프트웨어적으로 만든 가상의 컴퓨터, 실제 하드웨어 컴퓨터에서 독립적인 운영체제와 어플리케이션을 실행할 수 있는 환경을 제공
- 하이퍼바이저: 가상 머신을 관리하고 물리적 하드웨어 자원을 가상 머신들에게 분배 및 제어하는 소프트웨어 계층, 가상 머신의 운영체제는 하이퍼바이저가 제공하는 가상 하드웨어를 통해 실제 하드웨어 사용
- 가상 머신도 프로그램이기 때문에, 기본적으로 가상 머신 내부에서 실행되는 운영체제도 유저 모드로 실행됨
- 따라서 하이퍼바이저 모드를 따로 둠으로써 가상 머신에서도 실제 하드웨어에 접근할 수 있음

<br>
 
##  인터럽트와 시스템 콜

### 인터럽트에 대해 설명하세요.
- 정의: CPU가 현재 수행 중인 작업을 일시 중지하고 다른 더 중요한 작업을 수행하도록 하기 위한 매커니즘
- 인터럽트가 발생하면 CPU는 커널 영역의 인터럽트 서비스 루틴(ISR)을 실행함
- 인터럽트 서비스 루틴: 커널 영역에 적재된 인터럽트를 처리하기 위한 프로그램
- 인터럽트는 인터럽트를 발생시키는 주체에 따라 동기 인터럽트와 비동기 인터럽트로 구분할 수 있음

#### 하드웨어 인터럽트와 소프트웨어 인터럽트에 대해 설명하세요.

##### 동기 인터럽트(예외)
- CPU가 명령어 실행 중에 발생시키는 인터럽트
- 일반적으로 소프트웨어 인터럽트나 예외 상황(e.g. `NullPointerException` 등)에 의해 발생
- 소프트웨어 인터럽트: 시스템 콜이 호출될때 발생하는 인터럽트

##### 비동기 인터럽트(하드웨어 인터럽트)
- 입출력 장치나 타이머 등의 하드웨어에 의해 발생하는 인터럽트
- 하드웨어 인터럽트를 사용함으로써 CPU는 입출력 장치의 작업 완료 여부를 주기적으로 확인(폴링)할 필요가 없음

#### 인터럽트는 어떻게 처리되나요? (하드웨어 인터럽트 기준)
1. 입출력 장치가 CPU에 인터럽트 요청 신호 전송
2. CPU는 명령어 실행 사이클이 끝나고 다음 명령어를 인출하기 전 항상 인터럽트 요청 여부 확인
3. CPU가 인터럽트 요청을 확인하면, 플래그 레지스터의 인터럽트 플래그를 통해 현재 인터럽트를 받아들일 수 있는지 여부 확인(단, 무시할 수 없는 non-maskable 인터럽트의 경우 그냥 실행)
4. 인터럽트를 받아들일 수 있다면 CPU는 지금까지의 작업을 스택에 저장
5. CPU는 인터럽트 벡터(인터럽트 서비스 루틴의 주소값)를 참조하여 인터럽트 서비스 루틴을 실행
6. 인터럽트 서비스 루틴이 종료되면 스택에 저장된 작업을 복구하여 실행 재개

<br>

### 시스템 콜에 대해 설명하세요.
- 프로그램이 운영체제의 서비스를 사용하고 싶을때 사용하는 인터페이스

#### 우리가 개발 할때는 시스템 콜을 직접 호출하지 않고도 운영체제의 서비스를 사용할 수 있습니다. 이는 어떻게 가능한 것일까요?
- 자바와 같은 고수준 언어에서는 시스템 콜을 직접 호출하지 않고, 시스템 콜을 래핑한 라이브러리를 통해 간접적으로 호출함
- 자바의 경우 내부적으로 `native` 메서드로 구현돼있음
- 네이티브 메서드는 JVM의 JNI(Java Native Interface)를 통해 호출될 수 있음
