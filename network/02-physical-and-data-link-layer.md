# 물리 계층과 데이터 링크 계층

<details>
<summary><h3>이더넷에 대해 설명하세요.</h3></summary>

- 물리 계층, 데이터 링크 계층의 프로토콜이며, LAN 환경에서 널리 사용됨
- 물리 계층: 다양한 전송 매체들의 규격 정의
- 데이터 링크 계층: 송수신되는 프레임의 구조, 송수신 방식(CSMA/CD), MAC 주소를 통한 주소 지정 및 관리 방식 등을 정의
</details>

<details>
<summary><h3>MAC(Media Access Control) 주소에 대해 설명하세요.</h3></summary>

#### 정의
- NIC(Network Interface Controller)에 할당된 6바이트 길이의 고유 식별자
  - NIC: 컴퓨터가 네트워크에 연결되어 데이터를 주고받을 수 있게 해주는 하드웨어, 내장/외장/무선 NIC 존재
- 데이터 링크 계층에서 장치 간 통신 시 사용되며, 일반적으로 변경이 불가함
- 같은 LAN 내에서 송신지와 수신지를 식별하는 데 사용됨
</details>

<details>
<summary><h3>이더넷 프레임의 구조에 대해 설명하세요.</h3></summary>

#### 헤더
- 프리엠블(Preamble): 7바이트의 비트 패턴(`10101010` 반복)과 1바이트의 SFD(Start Frame Delimiter, `10101011`)로 구성
  - 송수신 장치 간 동기화 및 프레임 시작 위치 식별에 사용됨
- 수신지 MAC 주소: 이더넷 프레임을 수신할 장치의 MAC 주소
- 송신지 MAC 주소: 이더넷 프레임을 전송한 장치의 MAC 주소
- 타입/길이: 2바이트 필드로, 값이 `0x0600` 이상이면 상위 계층 프로토콜 타입(IPv4 등)을 나타내고, 값이 `0x05DC` 이하면 페이로드 길이를 나타냄

#### 페이로드
- 상위 계층 데이터(일반적으로 IP 패킷 등)
- 데이터가 46바이트 미만일 경우, 최소 프레임 크기인 64바이트를 만족하기 위해 패딩이 추가됨

#### 트레일러
- FCS(Frame Check Sequence): 수신한 이더넷 프레임의 오류를 검사하기 위한 필드
  - CRC(Cyclic Redundancy Check) 방식으로 계산된 체크섬
  - 송신 측은 프리앰블을 제외한 프레임 내용을 기준으로 CRC를 계산하여 FCS에 포함
  - 수신 측은 동일 방식으로 CRC를 재계산하여 FCS 값과 비교함 -> 일치하지 않으면 오류
</details>

<details>
<summary><h3>허브에 대해 설명하세요.</h3></summary>

- 물리 계층 장비
- 여러 장치를 포트를 통해 물리적으로만 연결해주는 단순한 중계 장치이며, 현대 네트워크에서는 거의 사용되지 않음
- 물리 계층은 주소 개념이 없기 때문에, 허브는 송수신 되는 정보를 판단하거나 조작하지 않고 단순히 모든 포트로 브로드캐스트함
- 데이터를 수신한 호스트는 데이터 링크 계층에서 프레임의 목적지 MAC 주소를 확인하여 자신의 MAC 주소가 아니면 폐기함
- 반이중 모드(Half Duplex)만 지원하며, 이는 동시에 송수신이 불가능한 통신 방식임
  - 반대로, 전이중(Full Duplex) 모드는 송수신을 동시에 수행할 수 있음
  - 허브에서는 한 호스트가 데이터를 송신 중이면 다른 호스트는 기다려야 하며, 동시에 전송 시 충돌이 발생함
  - 이러한 충돌이 발생할 수 있는 영역을 콜리전 도메인이라 하며, 같은 허브에 연결된 모든 장치는 하나의 콜리전 도메인에 속함

<details>
<summary><h4>충돌 문제는 어떻게 해결할 수 있나요?</h4></summary>

1. CSMA/CD(Carrier Sense Multiple Access with Collision Detection) 프로토콜 사용
   - Carrier Sense: 메시지 전송 전, 네트워크 상에 신호가 흐르고 있는지 감지
   - Multiple Access: 네트워크 매체를 여러 장치가 공유
   - Collision Detection: 메시지가 동시에 전송된 경우 충돌 감지 후 전송 중단 -> 임의의 시간 동안 기다렸다가 재전송 시도
2. 스위치 사용
</details>
</details>

<details>
<summary><h3>스위치에 대해 설명하세요.</h3></summary>

- 데이터 링크 계층(L2) 장비(L3 스위치, L4 스위치 등도 있음)
- VLAN(Virtual LAN) 구성 가능
  - 하나의 물리적 스위치를 논리적으로 분할하여 여러 개의 LAN 처럼 사용할 수 있음  
  - 서로 다른 VLAN 간 통신을 위해서는 L3 이상의 장비가 필요함
  - VLAN 분리 방식
    - 포트 기반 VLAN: 사전에 특정 포트에 VLAN을 할당하고, 해당 포트에 연결된 장치를 VLAN에 포함시킴
    - MAC 기반 VLAN: 사전에 설정된 MAC 주소에 따라 VLAN을 결정 

<details>
<summary><h4>스위치는 허브의 충돌 문제를 어떻게 해결하나요?</h4></summary>

- 스위치는 MAC 주소를 학습하여 수신지 MAC 주소가 연결된 포트로만 전송(unicast)하므로 충돌이 발생하지 않음
- 즉, 각 포트가 독립적인 콜리전 도메인이며, 추가로 전이중(Full Duplex) 통신도 지원하므로 동시에 송수신 가능
- 따라서 허브처럼 CSMA/CD 프로토콜을 사용할 필요가 없음

<details>
<summary><h4>스위치는 MAC 주소를 어떻게 학습하나요? 상황을 가정하여 설명해주세요.</h4></summary>

- 스위치는 포트와 연결된 호스트의 MAC 주소 간 연관 관계를 MAC 주소 테이블에 저장

#### 예시 시나리오
1. 플러딩
   1. 스위치가 수신지 MAC 주소를 모를 경우, 모든 포트로 브로드캐스트 
   2. 수신지에서는 자신에게 해당하는 MAC 주소인 경우만 수신하고 응답을 보냄 
   3. 이때 스위치는 응답 프레임의 출발지 MAC 주소를 통해 MAC 주소와 포트를 학습
2. 필터링: 학습한 MAC 주소 테이블을 기반으로, 불필요한 포트로 프레임을 전달하지 않도록 차단
3. 포워딩: 수신지 MAC 주소에 해당하는 포트로만 프레임 전송
4. 에이징: MAC 주소 테이블에 등록된 주소가 일정 시간 동안 사용되지 않으면 자동 제거
</details>
</details>
</details>